<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="description" content="Hello! Welcome to my blog (*・ω・)ﾉ I will giv u free Cookies">
    <title>My... blog... I guess?</title>
    <style>
    body {
        background-image: url("stars.gif");
        background-repeat: repeat;
        background-color: black;
        background-attachment: fixed;
    }
    a {
        color: magenta;
    }
    s {
        opacity: 0.4;
    }
    h1 {
        font-family: 'Josefin Sans'
    }
    .entry {
        margin: 50px 200px 50px 200px;
        padding: 10px 10px 10px 10px;
        background-color: rgba(20,10,20,0.9);
        border: 1px solid white;
        border-radius: 5px;
        color: white;
        font-family: 'Comic Sans';
    }
    @font-face{
        font-family: 'Comic Mono';
        src: url("../fonts/ComicMono.ttf");
    }
    @font-face{
        font-family: 'Comic Sans';
        src: url("../fonts/ComicSans.ttf");
    }
    @font-face{
        font-family: 'Comic Sans';
        src: url("../fonts/ComicSansBold.ttf");
        font-weight: bold;
    }
    @font-face{
        font-family: 'Comic Sans';
        src: url("../fonts/ComicSansItalic.ttf");
        font-style: italic;
    }
    @font-face{
        font-family: 'Comic Sans';
        src: url("../fonts/ComicSansBoldItalic.ttf");
        font-weight: bold;
        font-style: italic;
    }
    .code {
        font-family: 'Comic Mono';
        background-color: rgb(10,5,10,0.95);
    }
    .date {
        font-size: 12px;
    }
    .image {
        padding: 5px;
    }
    .image:hover {
        background-color: rgb(255,255,255,0.3);
        border-radius: 5px;
    }
    </style>

    <style>@import url('https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@700&display=swap');</style> <!-- Google font "Josefin Sans" -->

    <!-- Latex stuff -->
    <script>
        MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
        };
    </script>
    <script id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
    </script>

    <script>
        document.cookie = "freecookie=Heres your free cookie!!! Enjoy ~ヾ(・ω・);";
    </script>
</head>
<body>
    <a href="../index.html"><img src="back.png" style="position: fixed; top: 20px; left: 20px;" /></a>

    <div class="entry">

        <div style="position: relative; width=0px; height=0px;">
            <img src="peek.gif" style="position: absolute; top:100px; left:-92px;" />
        </div>

        <h1>New 'Paint' program I made in Pygame</h1>

        <p class="date">July 22, 2023. 3:40pm</p>

        <p>It's been two weeks since I last touched this website <img src="zonepeek.webp" width=24 /></p>

        <p>I've been working on a 'paint' program for my own personal use. I want a paint program that allows me lots of flexibility and precision. Something that allows me to use code for image manipulation on the fly, and something that allows me to do drawing through scripting.</p>

        <p>I really wanted to use Python for this since it has lots of convenient modules, so I settled on using Pygame. This is <i>probably</i> not the best engine to use... (⌒_⌒;) It's just the one I'm most familiar with. The main library I use for image manipulation is PIL.</p>

        <p>Here is what it looks like right now, there's not much:</p>

        <center>
            <img src="paint-1.png" width="50%"/>
        </center>

        <p>Currently, it has a Layers system, a color picker, and some tools. The most useful feature I have here so far is the background removal tool. Basically, it allows you to click on an area on an image and make it transparent. <span style="color:rgb(255,128,255); font-style:italic">(Hover on the images to make it easier to see.)</span></p>

        <center>
            <img src="paint-2.png" width="33%" class="image" />
        </center>

        <p>The algorithm is more complicated than it seems. I have to account for anti-aliased edges so I don't get weird gray pixels around the edge. Look at the image below to see what I mean.</p>

        <center>
            <img src="paint-3.png" width="25%" class="image" />
        </center>

        <p>The first one is the original image. The second one simply changes the alpha values of each pixel depending on how 'white' that pixel is. This leaves some pixels gray-colored, which is bad. The third one fixes this by changing the RGB value of the pixel to also match its surroundings.</p>

        <p>There's one issue with this approach. The image I showed above is very simple; there's only a single black object on a white background, so we can easily just set all RGB values as black and be done. Unfortunately, most images aren't so simple. Consider for example,</p>

        <center>
            <img src="paint-4.png" width="50%" class="image" />
        </center>

        <p>The original image contains three objects: a black one, a gray one, and a light gray one. We expect the background removal tool to give the image on the right. How would we determine the RGB values for each pixel in this image?</p>

        <center>
            <img src="paint-5.png" width="33%" />
        </center>

        <p>These two pixels here have the exact same RGB value. Yet, we want to set them to different alpha values since they belong to shapes of different color. We have to somehow tell that the top one belongs to the 'gray' shape, and the bottom one belongs to the 'black' shape. Even worse, how would we handle pixels in the intersection?</p>

        <center>
            <img src="paint-6.png" width="33%" />
        </center>

        <p>It would need to somehow take the color from the "solid" portion of the image.</p>

        <p>An idea that popped up to me was to use a <i>Voronoi-esque</i> diagram. Essentially, we only take the "solid" portion of the image, and spread the colors to the entire image. This way, a pixel will take the RGB value of the nearest 'solid' pixel it finds.</p>

        <center>
            <img src="paint-7.png" width="50%" />
        </center>

        <p>Using this idea, the algorithm would be:</p>

        <ol>
            <li>Use BFS to figure out which pixels belong the background, up to some tolerance.</li>
            <li>Generate Voronoi-esque thing to spread out the colors from the remaining pixels.</li>
            <li>Calculate the alpha mask for each pixel in the background.</li>
        </ol>

        <p>Each step in this algorithm takes $O(w\cdot h)$ time, which should be fast. I could make it even faster by only applying the Voronoi step to the pixels around the border of the object.</p>

        <p>This a lot of steps to implement, so I tested it out with a grayscale image first. It worked surprisingly better than I expected! <img src="ikuwow.png" width=24 /></p>

        <center>
            <img src="paint-8.png" width="75%" class="image" />

            <p><b>Left image:</b> original; &nbsp; &nbsp; &nbsp; <b>Middle image:</b> "Voronoi" version; &nbsp; &nbsp; &nbsp; <b>Right image:</b> Final output</p>
        </center>

        <p>The final output has a couple of issues. When you zoom in on the image, you can see some of the "Voronoi" artifacts. It should be easily fixable by adjusting the threshold. After a couple of tweaks and making it work for RGB, here is the result I got:</p>

        <center>
            <img src="paint-9.png" width="50%" class="image" />
        </center>

        <p>I think I'm satisfied with this result. It still feels pretty trial-and-error-y to find the perfect threshold for the tool. All that's left for me to implement for this tol is a slider to easily change the threshold and feather radius.</p>

        <p>I still have a couple features I want to implement:</p>
        <ul>
            <li><b>Sliders for adjusting brush size, bucket threshold, etc.</b> Maybe they could all be the same slider since I don't really plan on implementing many tools.</li>
            <li><b>Blending options and layer merging.</b> I tried this once but it seems pretty slow for large images, I should find a way to optimize this.</li>
            <li><b>Scripting for draw tools.</b> For example, I want to be able to type something like this to quickly draw a grid:<br />

            <div class="code" style="margin:5px">for i in range(10):<br />
            &nbsp; &nbsp; draw_line((0, i), (10, i))<br />
            &nbsp; &nbsp; draw_line((i, 0), (i, 10))</div>
            <li><b>Image filters,</b> such as adjusting the vibrance of an image. I still don't know how exactly my phone's image editor does this.
        </ul>

        <p>I think that's all the features I would need. Right now, I can use the background removal tool to quickly turn any image I want to Discord emojis. <img src="pomihappy.png" width=24 /></p>

    </div>

    <div class="entry">

        <h1>Entry #2</h1>

        <p class="date">July 4, 2023. 4:30pm</p>

        <p>Second entry! It's been a while since I last updated my website. I have lots of things I want to do and I can't decide on which one I should do first!  (>_<;)</p>

        <p>To name a few,</p>
        <ul>
            <li>I want to learn Godot once and for all. It feels intimidating to learn at first but I'd imagine I'll quickly get used to it. Perhaps I just need a small push to get me to started.</li>
            <li>I want to relearn JavaScript. I already know how to use it before, but I forgot most of it now (ーωー;). This would be very useful if I want to automate stuff in my website.
            <li>I want to learn more math. Math is fun! I have a <b>ton</b> of math books in my backlog, currently juggling between reading all of them. The main one I'm focusing on right now is <i>Measure, Integration & Real Analysis</i> by Sheldon Axler (<a href="https://measure.axler.net">link</a>). I currently know nothing about measure theory, but I like real analysis (a bit) so this might be interesting.</li>
            <li>I think I should finish the osu!taiko map I've been working on. It's almost done, just need to map out a single section remaining.</li>
        </ul>
        <p>I guess those are the ones on the top of my to-do list at least.</p>

        <p>I'd also like to improve the website more, but I don't really know what else to add. Maybe I'll upload whatever games and projects I make here when I create them.</p>

        <p>Recently, I also learned how to make AI art! It's really easy, all you have to do is download AUTOMATIC1111 and there. It's entirely open-sourced too and even works offline (only downside is it requires like 20GB <img src="nanasmirk.webp" width=24 />). The first image I generated was Niko. I thought it was good so I upscaled it and made it my Discord profile pic.</p>

        <center>
            <img src="ai-art-000.png" width="25%" /> <img src="ai-art-001.jpeg" width="33%" />
        </center>

        <p>I also tested the img2img feature by drawing Miku in Niko's clothes using Paint and gave it to the AI. I think the result is really cute!</p>

        <div style="text-align:center">
            <img src="ai-art-003.png" width="25%" /> <img src="ai-art-004.png" width="25%" />
        </div>

        <p>It makes me wonder whether the same thing exists for AI chatbots, since they <i>should</i> be a lot simpler than generating images right? Problem is I can't find any good open-source/offline alternative.</p>

        <p>The most popular choice seems to be using OpenAI's API, but I don't really find it reliable. First, the AI lacks any freedom, it keeps saying something like "I can't form opinions" or "Sorry, I cannot act like a tsundere as it is against OpenAI's guidelines". Second, I don't trust the API being free forever. I want an open-source offline alternative which would give me more freedom over what the AI could do, so that's something also in my to-do list.</p>
    </div>

    <div class="entry">

        <h1>Entry #1</h1>

        <p class="date">June 25, 2023. 8:25pm</p>

        <p>Hello! Welcome to my... erm... empty blog (for now). <img src="koishibaka.png" width=24 /></p>

        <p>I actually have <i>two other</i> blogs. One on <a href="https://lightbulbmeow.wordpress.com">WordPress</a> (I think I never made it public), and another on <a href="https://lightbulbmeow.blogspot.com">Blogger</a> (which is also just dead). I wanted more freedom over my content, so I decided to <s>make my life harder</s> code up an entire website from scratch. Yes, I am typing <b>everything</b> in this website manually.</p>

        <p>I'm still deciding how I want my blog to look like, while trying to learn HTML, CSS, and JavaScript. I should try coding up something to make blog entry writing easier for me. Maybe I'll try to store all my blog entries as markdown files, then use JavaScript to automate it into HTML code.</p>

        <p>I should also try making $\LaTeX$ work somehow, because I want to write math stuffs too. (<b>Update</b>: I made it work! It's super easy. (<span style="transform: rotate(90deg); display: inline-block;">:P</span>) )</p>

        $$\displaystyle\sum_{n=1}^\infty\frac1{n^2}=\frac{\pi^2}6$$

        <p>I should also make it so that I can type Discord emojis, like <span class="code">:niko:</span> automatically turns into <img src="niko.png" width=24 /></p>

        <p>I think those are the only features I need for now... (I just hope this blog doesn't end up as another abandoned project. <img src="nanacry.webp" width=24 />)</p>
    </div>
</body>
